<!DOCTYPE html>
<html style="overflow:hidden; width:100%; height:100%; margin:0; padding:0;">
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Dood and Tectrid demo</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <!-- JQuery (needed by bootstrap) -->
    <script src="src/jquery.min.js"></script>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="src/bootstrap.min.css">
    <script src="src/bootstrap.min.js"></script>
    <!-- Bootstrap slider -->
    <link rel="stylesheet" href="src/bootstrap-slider.min.css">
    <script src="src/bootstrap-slider.min.js"></script>
    <!-- Bootstrap color selector -->
    <link rel="stylesheet" href="src/bootstrap-colorselector.min.css">
    <script src="src/bootstrap-colorselector.min.js"></script>
    <script>
        // Setup color selector
        $(function() {
            $('#colorSelector').colorselector({
                callback: function (value, color, title) {
                    window.app.changeColor(color);
                }
            });
        });
    </script>
    <!-- Boot box -->
    <script src="src/bootbox.min.js"></script>
    <!-- PEP (to get input on apple devices and firefox mobile) -->
    <script src="src/pep.min.js"></script>
    <!-- FileSaver.js -->
    <script src="src/FileSaver.min.js"></script>
    <!-- Blob.js -->
    <script src="src/blob.js"></script>
    <!-- APP -->
    <script src="src/babylon.js"></script>
    <link rel="stylesheet" href="src/app.css" type="text/css" />
    <script src="appload.js"></script>
    <!-- Google analytics -->
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-100410964-1', 'auto');
        ga('set', 'page', '/index_dood.html');
        ga('send', 'pageview');
    </script>
    <!-- Pop-up messages -->
    <script id="ChoosOutputFormat" type="text/html">
        <center><font style="font-size:30px">Chose output file format:</font></center>
        <br>
        <center>
            <div>
                <button id="stlButton" onclick="bootbox.hideAll();window.app.SaveToFile('stl');" class="btn btn-primary btn-lg"> STL </button>
                <button id="objButton" onclick="bootbox.hideAll();window.app.SaveToFile('obj');" class="btn btn-primary btn-lg"> OBJ </button>
            </div>
        </center>
    </script>
    <script id="ChoseObject" type="text/html">
        <div class="container" style="width:100%; height:100%;">
            <div id="myCarousel" class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators">
                    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                    <li data-target="#myCarousel" data-slide-to="1"></li>
                    <li data-target="#myCarousel" data-slide-to="2"></li>
                    <li data-target="#myCarousel" data-slide-to="3"></li>
                    <li data-target="#myCarousel" data-slide-to="4"></li>
                    <li data-target="#myCarousel" data-slide-to="5"></li>
                    <li data-target="#myCarousel" data-slide-to="6"></li>
                    <li data-target="#myCarousel" data-slide-to="7"></li>
                    <li data-target="#myCarousel" data-slide-to="8"></li>
                    <li data-target="#myCarousel" data-slide-to="9"></li>
                    <li data-target="#myCarousel" data-slide-to="10"></li>
                    <li data-target="#myCarousel" data-slide-to="11"></li>
                    <li data-target="#myCarousel" data-slide-to="12"></li>
                </ol>

                <div class="carousel-inner" role="listbox">
                    <div class="item active">
                        <a href="javascript:bootbox.hideAll();window.app.GenSphere();">
                            <img src="3d_models/sphere.jpg" alt="Sphere" style="width:100%;">
                        </a>
                    </div>

                    <div class="item">
                        <a href="javascript:bootbox.hideAll();window.app.GenBox();">
                            <img src="3d_models/box.jpg" alt="Box" style="width:100%;">
                        </a>
                    </div>

                    <div class="item">
                        <a href="javascript:bootbox.hideAll();window.app.GenCylinder();">
                            <img src="3d_models/cylinder.jpg" alt="Cylinder" style="width:100%;">
                        </a>
                    </div>

                    <div class="item">
                        <a href="javascript:bootbox.hideAll();window.app.GenCube();">
                            <img src="3d_models/cube.jpg" alt="Cube" style="width:100%;">
                        </a>
                    </div>

                    <div class="item">
                        <a href="javascript:bootbox.hideAll();window.app.Load3DModel('pyramid.tct');">
                            <img src="3d_models/pyramid.jpg" alt="Pyramid" style="width:100%;">
                        </a>
                    </div>

                    <div class="item">
                        <a href="javascript:bootbox.hideAll();window.app.Load3DModel('disk.tct');">
                            <img src="3d_models/disk.jpg" alt="Disk" style="width:100%;">
                        </a>
                    </div>

                    <div class="item">
                        <a href="javascript:bootbox.hideAll();window.app.Load3DModel('ring.tct');">
                            <img src="3d_models/ring.jpg" alt="Ring" style="width:100%;">
                        </a>
                    </div>

                    <div class="item">
                        <a href="javascript:bootbox.hideAll();window.app.Load3DModel('mug.tct');">
                            <img src="3d_models/mug.jpg" alt="Mug" style="width:100%;">
                        </a>
                    </div>

                    <div class="item">
                        <a href="javascript:bootbox.hideAll();window.app.Load3DModel('head.tct');">
                            <img src="3d_models/head.jpg" alt="Head" style="width:100%;">
                        </a>
                    </div>

                    <div class="item">
                        <a href="javascript:bootbox.hideAll();window.app.Load3DModel('girl.tct');">
                            <img src="3d_models/girl.jpg" alt="Girl" style="width:100%;">
                        </a>
                    </div>

                    <div class="item">
                        <a href="javascript:bootbox.hideAll();window.app.Load3DModel('boy.tct');">
                            <img src="3d_models/boy.jpg" alt="Boy" style="width:100%;">
                        </a>
                    </div>

                    <div class="item">
                        <a href="javascript:bootbox.hideAll();window.app.Load3DModel('cat.tct');">
                            <img src="3d_models/cat.jpg" alt="Cat" style="width:100%;">
                        </a>
                    </div>

                    <div class="item">
                        <a href="javascript:bootbox.hideAll();window.app.Load3DModel('gearknob.tct');">
                            <img src="3d_models/gearknob.jpg" alt="GearKnob" style="width:100%;">
                        </a>
                    </div>
                </div>

                <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                    <span class="glyphicon glyphicon-chevron-left"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="right carousel-control" href="#myCarousel" data-slide="next">
                    <span class="glyphicon glyphicon-chevron-right"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
    </script>
    <script id="CreateOrCombine" type="text/html">
        <center><font style="font-size:30px">Create a new scene or combine with existing one ?</font></center>
        <br>
        <center>
            <div>
                <button id="createButton" onclick="bootbox.hideAll(); window.app.CreateNewScene(window.app.GetCurMeshItemToCreateOrCombine()); window.app.ClearMeshItemToCreateOrCombine(false);" class="btn btn-primary btn-lg"> Create </button>
                <button id="combineButton" onclick="bootbox.hideAll(); window.app.StartCombineToSceneMode();" class="btn btn-primary btn-lg"> Combine (beta) </button>
            </div>
        </center>
    </script>
</head>
<body style="overflow:hidden; width:100%; height:100%; margin:0; padding:0; background-color: #1A1A18">
    <div id="mainUI" style="display:inline;">
        <!--Top left-->
        <div class="btn-group-vertical" style="position:absolute; left:0%; top:0%; pointer-events: none">
            <label class="btn label label-default unselectable"> Display </label>
            <!--fullscreen-->
            <button id="fullScreenButton" class="btn btn-default btn-sm" style="pointer-events: auto"> Fullscreen </button>
            <!--color-->
            <div class="btn btn-default btn-sm" style="display: table">
                <div class="unselectable" style="display: table-cell">
                    Color
                </div>
                <div style="display: table-cell; pointer-events: auto">
                    <div style="margin-left:20%;">
                        <select id="colorSelector">
                            <option value="1" data-color="#F0DCC8" selected="selected" ">clay</option>
                            <option value="2" data-color="#A0522D">sienna</option>
                            <option value="3" data-color="#CD5C5C">indian red</option>
                            <option value="4" data-color="#FF4500">orange red</option>
                            <option value="5" data-color="#008B8B">dark cyan</option>
                            <option value="6" data-color="#B8860B">dark golden rod</option>
                            <option value="7" data-color="#32CD32">lime green</option>
                            <option value="8" data-color="#FFD700">gold</option>
                            <option value="9" data-color="#48D1CC">medium turquoise</option>
                            <option value="10" data-color="#CEFA05">electric lime</option>
                            <option value="11" data-color="#FF69B4">hot pink</option>
                            <option value="12" data-color="#4169e1">royal blue</option>
                            <option value="13" data-color="#87CEFA">light sky blue</option>
                            <option value="14" data-color="#6495ED">corn flower blue</option>
                            <option value="15" data-color="#DC143C">crimson</option>
                            <option value="16" data-color="#FF8C00">dark orange</option>
                            <option value="17" data-color="#C71585">medium violet red</option>
                            <option value="18" data-color="#FF0000">red</option>
                            <option value="19" data-color="#00FF00">green</option>
                            <option value="20" data-color="#0000FF">blue</option>
                            <option value="21" data-color="#FFFF00">yellow</option>
                            <option value="22" data-color="#FF00FF">magenta</option>
                            <option value="23" data-color="#00FFFF">cyan</option>
                            <option value="24" data-color="#A0A0A0">grey</option>
                            <option value="25" data-color="#303030">dark grey</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <!--Top right-->
        <div id="brushMenu" class="btn-group-vertical" style="position:absolute; right:0%; top:0%;">
            <label class="btn label label-default unselectable"> Brushes </label>
            <button id="drawButton" class="btn btn-primary btn-sm" userdata="brushButton"> Draw </button>
            <!--<button id="inflateButton" class="btn btn-default btn-sm" userdata="brushButton"> Inflate </button>-->
            <button id="digButton" class="btn btn-default btn-sm" userdata="brushButton"> Dig </button>
            <button id="flattenButton" class="btn btn-default btn-sm" userdata="brushButton"> Flatten </button>
            <button id="dragButton" class="btn btn-default btn-sm" userdata="brushButton"> Drag </button>
            <div class="btn-default btn-sm" style="display: table">
                <div class="unselectable" style="display: table-cell; ">
                    Mirror
                </div>
                <div style="display: table-cell; padding-left: 10%; padding-top: 2%;">
                    <div class="slider-switch">
                        <input id="mirrorSwitch" type="checkbox" />
                        <label for="mirrorSwitch" class="label-primary"></label>
                    </div>
                </div>
            </div>
        </div>
        <!--botton right-->
        <div style="position:absolute; right:0%; bottom:0%; ">
            <div>
                <label class="label unselectable"> Brush strength </label>
            </div>
            <div>
                <input id="sliderStrength" data-slider-id='CustomSlider' type="text" data-slider-min="0" data-slider-max="1" data-slider-step="0.01" data-slider-value="0.5" data-slider-tooltip="hide" />
            </div>
            <div>
                <label class="label unselectable"> Brush size </label>
            </div>
            <div>
                <input id="sliderSize" data-slider-id='CustomSlider' type="text" data-slider-min="1" data-slider-max="30" data-slider-step="1" data-slider-value="12" data-slider-tooltip="hide" />
            </div>
        </div>
        <!--bottom left-->
        <div class="btn-group-vertical" style="position:absolute; left:0%; bottom:0%;">
            <label class="btn label label-default unselectable"> Shapes </label>
            <button id="openButton" class="btn btn-default btn-sm"> Open </button>
            <label for="loadButton" class="btn btn-default btn-sm"> Load file </label>
            <input id="loadButton" style="display:none;" type="file" accept=".obj, .stl">
            <button id="saveButton" class="btn btn-default btn-sm" userdata="unlocked"> Save file </button>
            <button id="printButton" class="btn btn-default btn-sm"> Print with<br>AstroPrint </button>
        </div>
        <!--Undo/redo (left and right side)-->
        <button id="undoButton" class="btn btn-default" style="position:absolute; left:0%; top:48%;">
            <span class="glyphicon glyphicon-chevron-left"></span>
        </button>
        <button id="redoButton" class="btn btn-default" style="position:absolute; right:0%; top:48%;">
            <span class="glyphicon glyphicon-chevron-right"></span>
        </button>
    </div>
    <div id="combineUI" style="display:none;">
        <!-- Rotate and scale -->
        <div style="position:absolute; left:0%; top:0%; width:100%; text-align: center;">
            <div class="btn-group">
                <button id="moveButton" class="btn btn-default">
                    Move
                </button>
                <button id="rotateButton" class="btn btn-default">
                    Rotate
                </button>
                <button id="scaleButton" class="btn btn-default">
                    Scale
                </button>
            </div>
        </div>
        <!-- Merge, substract, intersect -->
        <div style="position:absolute; left:0%; bottom:0%; width:100%; text-align: center;">
            <div class="btn-group">
                <button id="mergeButton" class="btn btn-default">
                    Merge
                </button>
                <button id="subtractButton" class="btn btn-default">
                    Subtract
                </button>
                <button id="intersectButton" class="btn btn-default">
                    Intersection
                </button>
            </div>        <!-- Cancel -->
        </div>
        <button id="cancelCombineButton" class="btn btn-default" style="position:absolute; right:0%; top:0%;">
            Cancel
        </button>
    </div>
    <div id="spinner" class="tectrid-spinner" style="display:inline;"></div>
    <!--WebGL-->
    <canvas id="renderCanvas" touch-action="none" style="overflow:hidden; width:100%; height:100%; touch-action:none;"></canvas>
    <!-- astro print -->
    <script src="https://cloud.astroprint.com/js/min/lib/astroprint.import.js"></script>
    <!--Welcome message-->
    <script>
        function _getQueryStringValue(key)
        {
            return decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]" + encodeURIComponent(key).replace("/[\.\+\*]/g", "\\$&") + "(?:\\=([^&]*))?)?.*$", "i"), "$1"));
        }
        if(_getQueryStringValue("welcome") != "no")
        {
            bootbox.alert({
                size: 'large',
                message: "\
                <center><img src=\"./logos/dood-tectrid.png\" style=\"width:100%; height:100%\"></center>\
                <br>\
                <center><font style=\"font-size:30px\">Invite you to play with an intuitive way of creating!</font><center>\
                <br>\
                <center><font style=\"font-size:35px\">Have Fun!</font></center>"
            });
        }
    </script>
</body>
</html>
